<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOUNA SHOP</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Open Sans',sans-serif}
body{background:#f5f5f7;color:#333}

/* ===== HEADER ===== */
.top-bar{
display:flex;flex-direction:column;align-items:center;padding:16px;background:#fff;box-shadow:0 4px 10px rgba(0,0,0,0.1);position:sticky;top:0;z-index:1000;border-bottom:1px solid #eee;
}
.profile{
width:60px;height:60px;border-radius:50%;background:#ffb347 url('https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?crop=entropy&cs=tinysrgb&fit=crop&h=60&w=60') center/cover no-repeat;border:2px solid #fff;margin-bottom:8px;box-shadow:0 5px 15px rgba(255,179,71,0.5);
}
.logo{font-family:'Montserrat';letter-spacing:2px;font-size:26px;margin-bottom:8px;color:#ff7e5f;}

/* ===== SWITCHERS ===== */
.switchers{display:flex;gap:10px}
.switchers button{
border:none;padding:6px 14px;border-radius:25px;cursor:pointer;font-weight:600;
background:linear-gradient(135deg,#ff7e5f,#feb47b);color:#fff;transition:0.3s;
}
.switchers button:hover{opacity:0.85}

/* ===== CATEGORIES ===== */
.categories{display:flex;gap:10px;padding:10px 16px;overflow-x:auto;scroll-behavior:smooth;}
.categories button{
border:none;padding:8px 18px;border-radius:25px;cursor:pointer;font-weight:600;
background:#eee;color:#333;transition:0.3s;
}
.categories button.active{background:linear-gradient(135deg,#ff7e5f,#feb47b);color:#fff}

/* ===== FILTERS ===== */
.filters{display:flex;gap:10px;padding:0 16px;margin-bottom:10px;flex-wrap:wrap;}
.filters input[type="number"],.filters select{
padding:8px;border-radius:12px;border:1px solid #ccc;outline:none
}
.filters button{
padding:8px 16px;border:none;border-radius:20px;background:linear-gradient(135deg,#ff7e5f,#feb47b);color:#fff;cursor:pointer;font-weight:600;
transition:0.3s
}
.filters button:hover{opacity:0.85}

/* ===== CART FLOAT ===== */
.cart-float{
position:fixed;top:100px;left:20px;width:60px;height:60px;
background:linear-gradient(135deg,#ff7e5f,#feb47b);border-radius:50%;display:flex;justify-content:center;align-items:center;
font-size:22px;color:#fff;cursor:pointer;z-index:999;
box-shadow:0 10px 30px rgba(255,126,95,.5);
animation:float 3s infinite ease-in-out
}
.cart-float span{
position:absolute;top:-6px;right:-6px;
background:#25D366;color:#fff;font-size:12px;
padding:2px 6px;border-radius:50%
}
@keyframes float{50%{transform:translateY(-6px)}}

/* ===== PRODUCTS ===== */
.products{
padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:20px
}
.product{
background:#fff;border-radius:16px;padding:14px;text-align:center;position:relative;box-shadow:0 6px 15px rgba(0,0,0,0.08);transition:0.3s
}
.product:hover{transform:translateY(-4px);box-shadow:0 12px 20px rgba(0,0,0,0.12);}
.product img{width:100%;border-radius:12px}
.product h3{margin:10px 0;font-size:15px;color:#333;font-weight:600}
.product p{font-weight:600;color:#ff7e5f;margin-bottom:8px}
.product button{
background:linear-gradient(135deg,#ff7e5f,#feb47b);border:none;padding:8px 16px;border-radius:12px;font-weight:bold;color:#fff;cursor:pointer;transition:0.3s
}
.product button:hover{opacity:0.85}
.badge{
position:absolute;top:10px;right:10px;
background:#25D366;color:#fff;font-size:12px;
padding:4px 8px;border-radius:12px;
opacity:0;transition:.3s
}
.badge.show{opacity:1}

/* ===== CART PANEL ===== */
.cart-panel{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;justify-content:center;align-items:flex-end;z-index:998}
.cart-box{
background:#fff;width:100%;max-height:90%;border-radius:22px 22px 0 0;padding:20px;animation:slideUp .4s ease;overflow:auto;
box-shadow:0 -4px 20px rgba(0,0,0,0.1)
}
@keyframes slideUp{from{transform:translateY(100%)}}
.cart-header{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:600;color:#333;font-size:18px}
.cart-item{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:500;color:#555}
.qty{display:flex;gap:8px;align-items:center}
.qty button{
width:26px;height:26px;border-radius:50%;
border:none;background:linear-gradient(135deg,#ff7e5f,#feb47b);color:#fff;cursor:pointer
}
.cart-actions{display:flex;gap:10px;margin-top:12px}
.cart-actions button{flex:1;padding:12px;border:none;border-radius:12px;font-weight:bold;transition:0.3s}
.cancel{background:#aaa;color:#fff}
.cancel:hover{opacity:0.85}
.whatsapp{background:#25D366;color:#fff}
.whatsapp:hover{opacity:0.85}

/* ===== FORM ===== */
.order-form{
margin-top:15px;display:flex;flex-direction:column;gap:10px
}
.order-form input,
.order-form select{padding:10px;border-radius:10px;border:1px solid #ccc;outline:none}
.error{color:#ff6b6b;font-size:13px;display:none;margin-top:-6px}
input.error-input, select.error-input{border:1px solid #ff6b6b}

/* ===== CONFIRMATION ===== */
.confirmation{
display:none;min-height:100vh;justify-content:center;align-items:center;
flex-direction:column;text-align:center;font-size:18px;color:#333
}
.confirmation button{
margin-top:20px;padding:10px 20px;border:none;border-radius:12px;background:linear-gradient(135deg,#ff7e5f,#feb47b);color:#fff;font-weight:600;cursor:pointer;transition:0.3s
}
.confirmation button:hover{opacity:0.85}

.confetti{position:fixed;width:8px;height:8px;animation:fall 1s linear forwards}
@keyframes fall{to{transform:translateY(100vh) rotate(360deg);opacity:0}}
</style>
</head>
<body>
<div id="shop">

<div class="top-bar">
  <div class="profile"></div>
  <div class="logo">NOUNA SHOP</div>
  <div class="switchers">
    <button onclick="toggleLang()">AR / EN</button>
    <button onclick="toggleCurrency()">MAD / â‚¬</button>
  </div>
</div>

<div class="filters">
  <input type="number" id="minPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø¯Ù†Ù‰">
  <input type="number" id="maxPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø¹Ù„Ù‰">
  <select id="availability">
    <option value="all">Ø§Ù„ÙƒÙ„</option>
    <option value="available">Ù…ØªÙˆÙØ±</option>
    <option value="unavailable">ØºÙŠØ± Ù…ØªÙˆÙØ±</option>
  </select>
  <button onclick="applyFilters()">ØªØµÙÙŠØ©</button>
</div>

<div class="categories" id="categories"></div>
<div class="cart-float" onclick="openCart()">ğŸ›’<span id="cartCount">0</span></div>
<div class="products" id="products"></div>

<div class="cart-panel" id="cartPanel">
 <div class="cart-box">
  <div class="cart-header">
   <strong id="cartTitle">Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</strong>
   <span onclick="closeCart()" style="cursor:pointer">âœ•</span>
  </div>
  <div id="cartItems"></div>
  <p id="totalPrice"></p>
  <div class="order-form">
    <input id="customerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
    <div id="nameError" class="error"></div>
    <input id="customerAddress" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
    <div id="addressError" class="error"></div>
    <select id="city">
      <option value="">-- Ø§Ø®ØªØ§Ø± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© --</option>
      <option value="Rabat">Ø§Ù„Ø±Ø¨Ø§Ø· - 0 Ø¯Ø±Ù‡Ù…</option>
      <option value="Sale">Ø³Ù„Ø§ - 0 Ø¯Ø±Ù‡Ù…</option>
      <option value="Casa">Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ - 25 Ø¯Ø±Ù‡Ù…</option>
      <option value="Other">Ù…Ø¯ÙŠÙ†Ø© Ø£Ø®Ø±Ù‰ - 35 Ø¯Ø±Ù‡Ù…</option>
    </select>
    <div id="cityError" class="error"></div>
  </div>
  <div class="cart-actions">
   <button class="cancel" onclick="clearCart()">Ø¥Ù„ØºØ§Ø¡</button>
   <button class="whatsapp" onclick="sendOrder()">ÙˆØ§ØªØ³Ø§Ø¨</button>
  </div>
 </div>
</div>
</div>

<div class="confirmation" id="confirmPage">
<h2>âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</h2>
<p>Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</p>
<button onclick="location.reload()">Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
</div>

<script>
// ===== PRODUCTS DATA =====
const productsData = [
{id:1,cat:"coffee",ar:"Ù…Ø§ÙƒÙŠÙ†Ø© Ù‚Ù‡ÙˆØ©",en:"Coffee Machine",price:350,available:true,img:"https://images.unsplash.com/photo-1517668808822-9ebb02f2a0e6"},
{id:2,cat:"coffee",ar:"Ù…Ø·Ø­Ù†Ø© Ù‚Ù‡ÙˆØ©",en:"Coffee Grinder",price:280,available:true,img:"https://images.unsplash.com/photo-1587730938486-27f0c2f1fefc"},
{id:3,cat:"coffee",ar:"Ø¥Ø¨Ø±ÙŠÙ‚ ØªØ­Ø¶ÙŠØ±",en:"Coffee Brewer",price:190,available:false,img:"https://images.unsplash.com/photo-1509042239860-f550ce710b93"},
{id:4,cat:"coffee",ar:"Ø¢Ù„Ø© Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ",en:"Espresso Machine",price:550,available:true,img:"https://images.unsplash.com/photo-1521302080371-d8bfccfbb9cf"},
{id:5,cat:"coffee",ar:"Ù…ÙŠØ²Ø§Ù† Ù‚Ù‡ÙˆØ©",en:"Coffee Scale",price:120,available:true,img:"https://images.unsplash.com/photo-1524594150408-1b6a9f14f0d1"},
{id:6,cat:"cups",ar:"ÙƒÙˆØ¨ Ø®Ø²Ù",en:"Ceramic Cup",price:90,available:true,img:"https://images.unsplash.com/photo-1527169402691-a3fbf6e11382"},
{id:7,cat:"cups",ar:"ÙƒÙˆØ¨ Ø²Ø¬Ø§Ø¬",en:"Glass Cup",price:70,available:false,img:"https://images.unsplash.com/photo-1517705008128-361805f42e86"},
{id:8,cat:"cups",ar:"ÙƒÙˆØ¨ ÙØ§Ø®Ø±",en:"Luxury Cup",price:150,available:true,img:"https://images.unsplash.com/photo-1541167760496-1628856ab772"},
{id:9,cat:"cups",ar:"Ø·Ù‚Ù… Ø£ÙƒÙˆØ§Ø¨",en:"Cup Set",price:260,available:true,img:"https://images.unsplash.com/photo-1504754524776-8f4f37790ca0"},
{id:10,cat:"cups",ar:"ÙƒÙˆØ¨ Ø³ÙØ±",en:"Travel Mug",price:180,available:true,img:"https://images.unsplash.com/photo-1523362628745-0c100150b504"}
]

let cart=[],lang="ar",currency="MAD",rate=10.9,currentCat="all"
const deliveryFees={Rabat:0,Sale:0,Casa:25,Other:35}

const products=document.getElementById("products")
const categories=document.getElementById("categories")
const cartItems=document.getElementById("cartItems")

function renderCategories(){
 const cats=["all",...new Set(productsData.map(p=>p.cat))]
 categories.innerHTML=""
 cats.forEach(c=>{
   categories.innerHTML+=`<button class="${c===currentCat?"active":""}" onclick="filterCat('${c}')">${c==="all"?(lang==="ar"?"Ø§Ù„ÙƒÙ„":"All"):c}</button>`
 })
}
function filterCat(c){currentCat=c;renderCategories();renderProducts()}

function renderProducts(){
 let minPrice=parseFloat(document.getElementById("minPrice").value)||0
 let maxPrice=parseFloat(document.getElementById("maxPrice").value)||Infinity
 let availability=document.getElementById("availability").value

 products.innerHTML=""
 productsData.filter(p=>{
   if(currentCat!=="all" && p.cat!==currentCat) return false
   if(p.price<minPrice || p.price>maxPrice) return false
   if(availability==="available" && !p.available) return false
   if(availability==="unavailable" && p.available) return false
   return true
 }).forEach(p=>{
  products.innerHTML+=`
  <div class="product">
   <div class="badge">âœ“</div>
   <img src="${p.img}">
   <h3>${lang==="ar"?p.ar:p.en}</h3>
   <p>${format(p.price)}</p>
   <button onclick="addToCart(${p.id},this)">${lang==="ar"?"Ø£Ø¶Ù":"Add"}</button>
  </div>`
 })
}
function applyFilters(){renderProducts()}

renderCategories();renderProducts()

function addToCart(id,btn){
 const item=cart.find(i=>i.id===id)
 item?item.qty++:cart.push({...productsData.find(p=>p.id===id),qty:1})
 updateCartDisplay()
 btn.parentElement.querySelector(".badge").classList.add("show")
 setTimeout(()=>btn.parentElement.querySelector(".badge").classList.remove("show"),700)
 confetti()
}

function updateCartDisplay(){
 cartCount.innerText=cart.reduce((a,b)=>a+b.qty,0)
 renderCart()
}

function openCart(){cartPanel.style.display="flex";renderCart()}
function closeCart(){cartPanel.style.display="none"}

function renderCart(){
 cartItems.innerHTML=""
 let total=0
 cart.forEach(i=>{
  total+=i.price*i.qty
  cartItems.innerHTML+=`
  <div class="cart-item">
   <span>${lang==="ar"?i.ar:i.en}</span>
   <div class="qty">
    <button onclick="changeQty(${i.id},-1)">âˆ’</button>
    <span>${i.qty}</span>
    <button onclick="changeQty(${i.id},1)">+</button>
   </div>
  </div>`
 })
 totalPrice.innerText=(lang==="ar"?"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ":"Total: ")+format(total)
}

function changeQty(id,v){
 const item=cart.find(i=>i.id===id)
 if(item){item.qty+=v;if(item.qty<=0)cart=cart.filter(i=>i.id!==id)}
 updateCartDisplay()
}

function clearCart(){cart=[];updateCartDisplay()}

function sendOrder(){
 clearErrors()
 if(!cart.length){alert(lang==="ar"?"Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©":"Cart is empty"); return}

 let name = customerName.value.trim()
 let address = customerAddress.value.trim()
 let city = document.getElementById("city").value
 let valid = true

 if(!name){setError(customerName,"nameError",lang==="ar"?"Ø§Ù„Ø§Ø³Ù… Ø¶Ø±ÙˆØ±ÙŠ":"Name required"); valid=false}
 if(!address){setError(customerAddress,"addressError",lang==="ar"?"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¶Ø±ÙˆØ±ÙŠ":"Address required"); valid=false}
 if(!city){setError(document.getElementById("city"),"cityError",lang==="ar"?"Ø§Ø®ØªØ§Ø± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©":"Select city"); valid=false}
 if(!valid) return

 const delivery=deliveryFees[city]
 let msg=`${lang==="ar"?"Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† NOUNA SHOP":"New Order from NOUNA SHOP"}\n`
 msg += `${lang==="ar"?"Ø§Ù„Ø§Ø³Ù…":"Name"}: ${name}\n${lang==="ar"?"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†":"Address"}: ${address}\n${lang==="ar"?"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©":"City"}: ${city}\n\n`

 let total=0
 cart.forEach(i=>{
   total += i.price*i.qty
   msg += `â€¢ ${lang==="ar"?i.ar:i.en} Ã—${i.qty}\n`
 })
 total+=delivery
 msg += lang==="ar"?`\nØ§Ù„ØªÙˆØµÙŠÙ„: ${delivery} MAD\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${format(total)}\nØ§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…`
              :`\nDelivery: ${delivery}\nTotal: ${format(total)}\nCash on delivery`

 let phone="212623999334"
 window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`,"_blank")

 cartPanel.style.display="none"
 shop.style.display="none"
 confirmPage.style.display="flex"
 confetti()
}

function setError(input,id,msg){input.classList.add("error-input"); document.getElementById(id).innerText=msg; document.getElementById(id).style.display="block"}
function clearErrors(){document.querySelectorAll(".error").forEach(e=>e.style.display="none"); document.querySelectorAll(".error-input").forEach(e=>e.classList.remove("error-input"))}

function toggleLang(){lang=lang==="ar"?"en":"ar";document.documentElement.dir=lang==="ar"?"rtl":"ltr";renderCategories();renderProducts();updateCartDisplay()}
function toggleCurrency(){currency=currency==="MAD"?"EUR":"MAD";updateCartDisplay()}
function format(p){return currency==="MAD"?p+" MAD":(p/rate).toFixed(1)+" â‚¬"}

function confetti(){for(let i=0;i<25;i++){const c=document.createElement("div");c.className="confetti";c.style.left=Math.random()*100+"%";c.style.background=`hsl(${Math.random()*360},100%,50%)`;document.body.appendChild(c);setTimeout(()=>c.remove(),1000)}}
</script>
</body>
</html>
