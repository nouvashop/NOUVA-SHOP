<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOUVA SHOP</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Open Sans',sans-serif}
body{background:#f5f5f5;color:#111}

/* HEADER */
header{
background:#000;
color:#FFD700;
padding:16px;
position:sticky;
top:0;
z-index:1000;
text-align:center;
box-shadow:0 4px 12px rgba(0,0,0,.5)
}
.logo{font-family:'Montserrat';font-size:26px;letter-spacing:2px}
.controls{margin-top:8px;display:flex;justify-content:center;gap:10px}
.controls button{
border:none;
padding:6px 14px;
border-radius:20px;
background:linear-gradient(135deg,#000,#FFD700);
color:#fff;
cursor:pointer;
font-weight:600
}

/* FILTER */
.filters{
display:flex;
gap:10px;
padding:14px;
flex-wrap:wrap;
justify-content:center
}
.filters input,.filters select{
padding:8px;
border-radius:12px;
border:1px solid #ccc
}
.filters button{
padding:8px 16px;
border:none;
border-radius:20px;
background:#000;
color:#FFD700;
font-weight:bold;
cursor:pointer
}

/* PRODUCTS */
.products{
padding:20px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
gap:18px
}
.product{
background:#fff;
border-radius:18px;
padding:12px;
text-align:center;
box-shadow:0 8px 20px rgba(0,0,0,.1);
transition:.3s
}
.product:hover{transform:translateY(-4px)}
.product img{
width:100%;
height:160px;
object-fit:cover;
border-radius:14px
}
.product h3{margin:8px 0;font-size:15px}
.product p{color:#FFD700;font-weight:bold}
.product button{
margin-top:6px;
padding:8px 14px;
border:none;
border-radius:14px;
background:#000;
color:#FFD700;
cursor:pointer;
font-weight:bold
}

/* CART FLOAT */
.cart-float{
position:fixed;
bottom:20px;
right:20px;
width:70px;
height:70px;
border-radius:50%;
background:#000;
color:#FFD700;
display:flex;
align-items:center;
justify-content:center;
font-size:28px;
cursor:pointer;
box-shadow:0 0 25px rgba(255,215,0,.6);
z-index:999
}
.cart-float span{
position:absolute;
top:-6px;
right:-6px;
background:#FFD700;
color:#000;
padding:4px 8px;
border-radius:50%;
font-size:13px
}

/* CART PANEL */
.cart-panel{
position:fixed;
inset:0;
background:rgba(0,0,0,.6);
display:none;
align-items:flex-end;
justify-content:center;
z-index:1000
}
.cart-box{
background:#fff;
width:100%;
max-height:90%;
border-radius:22px 22px 0 0;
padding:20px;
overflow:auto;
animation:up .4s ease
}
@keyframes up{from{transform:translateY(100%)}}
.cart-header{
display:flex;
justify-content:space-between;
font-weight:bold;
font-size:18px
}
.cart-item{
display:flex;
justify-content:space-between;
margin:8px 0
}

/* FORM */
.order-form{
margin-top:12px;
display:flex;
flex-direction:column;
gap:8px
}
.order-form input,.order-form select{
padding:10px;
border-radius:12px;
border:1px solid #ccc
}

/* BUTTONS */
.cart-actions{
display:flex;
gap:10px;
margin-top:14px
}
.cart-actions button{
flex:1;
padding:12px;
border:none;
border-radius:14px;
font-weight:bold;
cursor:pointer
}
.cancel{background:#aaa;color:#fff}
.whatsapp{background:#FFD700;color:#000}

/* CONFIRM */
.confirm{
display:none;
min-height:100vh;
align-items:center;
justify-content:center;
flex-direction:column;
text-align:center
}
.confirm button{
margin-top:16px;
padding:10px 20px;
border:none;
border-radius:14px;
background:#000;
color:#FFD700;
font-weight:bold
}
</style>
</head>

<body>

<header>
<div class="logo">NOUVA SHOP</div>
<div class="controls">
<button onclick="toggleLang()">AR / EN</button>
<button onclick="toggleCurrency()">MAD / ‚Ç¨</button>
</div>
</header>

<div class="filters">
<input type="number" id="minPrice" placeholder="ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿØŸÜŸâ">
<input type="number" id="maxPrice" placeholder="ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿπŸÑŸâ">
<input type="text" id="coupon" placeholder="ŸÉŸàÿØ ÿßŸÑÿÆÿµŸÖ">
<button onclick="renderProducts()">ÿ™ÿµŸÅŸäÿ©</button>
</div>

<div class="products" id="products"></div>

<div class="cart-float" onclick="openCart()">üõí<span id="cartCount">0</span></div>

<div class="cart-panel" id="cartPanel">
<div class="cart-box">
<div class="cart-header">
<span>ÿßŸÑÿ≥ŸÑÿ©</span>
<span onclick="closeCart()" style="cursor:pointer">‚úï</span>
</div>

<div id="cartItems"></div>
<p id="total"></p>

<div class="order-form">
<input id="name" placeholder="ÿßŸÑÿßÿ≥ŸÖ">
<input id="address" placeholder="ÿßŸÑÿπŸÜŸàÿßŸÜ">
<select id="city">
<option value="">ÿßŸÑŸÖÿØŸäŸÜÿ©</option>
<option value="Rabat">ÿßŸÑÿ±ÿ®ÿßÿ∑</option>
<option value="Casa">ÿßŸÑÿØÿßÿ± ÿßŸÑÿ®Ÿäÿ∂ÿßÿ°</option>
<option value="Other">ŸÖÿØŸäŸÜÿ© ÿ£ÿÆÿ±Ÿâ</option>
</select>
</div>

<div class="cart-actions">
<button class="cancel" onclick="clearCart()">ÿ•ŸÑÿ∫ÿßÿ°</button>
<button class="whatsapp" onclick="sendOrder()">Ÿàÿßÿ™ÿ≥ÿßÿ®</button>
</div>
</div>
</div>

<div class="confirm" id="confirm">
<h2>‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®</h2>
<button onclick="location.reload()">ÿ±ÿ¨Ÿàÿπ</button>
</div>

<script>
if("serviceWorker" in navigator){
navigator.serviceWorker.register("sw.js")
}

let lang="ar",currency="MAD",rate=10.9
let cart=[]
let discount=0

const coupons={
"NOUVA10":10,
"NOUVA20":20
}

const productsData=[
{id:1,ar:"ŸÖÿßŸÉŸäŸÜÿ© ŸÇŸáŸàÿ©",en:"Coffee Machine",price:350,img:"https://images.unsplash.com/photo-1517668808822-9ebb02f2a0e6"},
{id:2,ar:"ŸÖÿ∑ÿ≠ŸÜÿ© ŸÇŸáŸàÿ©",en:"Coffee Grinder",price:280,img:"https://images.unsplash.com/photo-1587730938486-27f0c2f1fefc"},
{id:3,ar:"ŸÉŸàÿ® ŸÅÿßÿÆÿ±",en:"Luxury Cup",price:150,img:"https://images.unsplash.com/photo-1541167760496-1628856ab772"},
{id:4,ar:"ŸÉŸàÿ® ÿ≥ŸÅÿ±",en:"Travel Mug",price:180,img:"https://images.unsplash.com/photo-1523362628745-0c100150b504"},
{id:5,ar:"ÿ¢ŸÑÿ© ÿ•ÿ≥ÿ®ÿ±Ÿäÿ≥Ÿà",en:"Espresso Machine",price:550,img:"https://images.unsplash.com/photo-1521302080371-d8bfccfbb9cf"} 
]

const products=document.getElementById("products")
const cartPanel=document.getElementById("cartPanel")
const cartItems=document.getElementById("cartItems")
const cartCount=document.getElementById("cartCount")

function renderProducts(){
products.innerHTML=""
let min=minPrice.value||0
let max=maxPrice.value||99999
productsData.filter(p=>p.price>=min&&p.price<=max).forEach(p=>{
products.innerHTML+=`
<div class="product">
<img src="${p.img}" loading="lazy">
<h3>${lang==="ar"?p.ar:p.en}</h3>
<p>${currency==="MAD"?p.price+" ÿØ.ŸÖ":(p.price/rate).toFixed(1)+" ‚Ç¨"}</p>
<button onclick="addToCart(${p.id})">ÿ£ÿ∂ŸÅ</button>
</div>`
})
}

function addToCart(id){
let item=cart.find(i=>i.id===id)
if(item)item.qty++
else cart.push({...productsData.find(p=>p.id===id),qty:1})
updateCart()
}

function updateCart(){
cartCount.textContent=cart.reduce((a,b)=>a+b.qty,0)
cartItems.innerHTML=""
let total=0
cart.forEach(i=>{
total+=i.price*i.qty
cartItems.innerHTML+=`
<div class="cart-item">
<span>${i.ar} √ó ${i.qty}</span>
<span>${i.price*i.qty} ÿØ.ŸÖ</span>
</div>`
})

let code=coupon.value.toUpperCase()
if(coupons[code]) discount=coupons[code]; else discount=0
let final=total-(total*discount/100)

totalEl=`ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: ${final.toFixed(0)} ÿØ.ŸÖ`
if(discount) totalEl+=` (ÿÆÿµŸÖ ${discount}%)`
document.getElementById("total").textContent=totalEl
}

function clearCart(){cart=[];updateCart()}
function openCart(){cartPanel.style.display="flex"}
function closeCart(){cartPanel.style.display="none"}
function toggleLang(){lang=lang==="ar"?"en":"ar";renderProducts()}
function toggleCurrency(){currency=currency==="MAD"?"EUR":"MAD";renderProducts()}

function sendOrder(){
if(!cart.length)return alert("ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©")
let msg="ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ ŸÖŸÜ NOUVA SHOP\n"
cart.forEach(i=>msg+=`${i.ar} x${i.qty}\n`)
msg+=document.getElementById("total").textContent
window.open("https://wa.me/212600000000?text="+encodeURIComponent(msg))
document.getElementById("confirm").style.display="flex"
}

renderProducts()
</script>

</body>
</html>
